(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{245:function(e,r,t){e.exports=t.p+"assets/img/container-structure.32f7cc02.svg"},246:function(e,r,t){e.exports=t.p+"assets/img/list-containers.e16871f2.png"},288:function(e,r,t){"use strict";t.r(r);var n=t(2),a=Object(n.a)({},(function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"docker-host"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-host"}},[e._v("#")]),e._v(" ðŸ–¥ Docker Host")]),e._v(" "),n("h2",{attrs:{id:"einleitung"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#einleitung"}},[e._v("#")]),e._v(" Einleitung")]),e._v(" "),n("p",[e._v("Die Gruppe Adler verfÃ¼gt Ã¼ber einen Dedicated Server auf welchem zwei Virtuelle Maschinen laufen. Eine dieser VMs ist der "),n("em",[e._v("Docker Host")]),e._v(", auf welchem Services wie Blechadler, Homepage, CMS, Forum, API, Slotting und einige weitere Tools als jeweils ein/mehrere Docker Container laufen.")]),e._v(" "),n("h2",{attrs:{id:"zugriff-auf-vm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#zugriff-auf-vm"}},[e._v("#")]),e._v(" Zugriff auf VM")]),e._v(" "),n("p",[e._v("Zugriff auf die VM erfolgt per ssh. Falls du kein Zugriff hast wende dich bitte an DerZade.")]),e._v(" "),n("h2",{attrs:{id:"die-wichtigsten-container"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#die-wichtigsten-container"}},[e._v("#")]),e._v(" Die wichtigsten Container")]),e._v(" "),n("p",[e._v("Alle Applikationen (ein oder mehrere zusammenhÃ¶rigen Container) sind grundsÃ¤tzlich unabhÃ¤ngig von einander aufgebaut. Hierbei gibt es aber einige Ausnahmen:")]),e._v(" "),n("h3",{attrs:{id:"reverse-proxy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#reverse-proxy"}},[e._v("#")]),e._v(" Reverse Proxy")]),e._v(" "),n("p",[e._v("Da mehrere Applikationen von auÃŸen auf Port 80 "),n("em",[e._v("(http)")]),e._v(" / 443 "),n("em",[e._v("(https)")]),e._v(" erreichbar sein sollen, muss ein reverse proxy zum Einsatz kommen. HierfÃ¼r kommt "),n("a",{attrs:{href:"https://github.com/jwilder/nginx-proxy",target:"_blank",rel:"noopener noreferrer"}},[e._v("nginx-proxy"),n("OutboundLink")],1),e._v(" und "),n("a",{attrs:{href:"https://github.com/JrCs/docker-letsencrypt-nginx-proxy-companion",target:"_blank",rel:"noopener noreferrer"}},[e._v("nginx-proxy-le"),n("OutboundLink")],1),e._v(" (fÃ¼r das automatische LÃ¶sen von Let's Encrypt Zertifikaten) zum Einsatz."),n("br"),e._v("\nAlle Container die nun auch per http(s) erreichbar sein sollen, mÃ¼ssen nur noch zwei Anforderungen erfÃ¼llen:")]),e._v(" "),n("ol",[n("li",[e._v("Dem "),n("code",[e._v("nginx-proxy")]),e._v(" Docker Netzwerk hinzugefÃ¼gt sein.")]),e._v(" "),n("li",[e._v("Folgende Environment Variablen gesetzt haben (Hierbei natÃ¼rlich "),n("code",[e._v("foo")]),e._v(" durch korrekten Wert ersetzen):\n"),n("ul",[n("li",[n("code",[e._v("VIRTUAL_HOST=foo.gruppe-adler.de,www.foo.gruppe-adler.de")])]),e._v(" "),n("li",[n("code",[e._v("LETSENCRYPT_HOST=foo.gruppe-adler.de")])]),e._v(" "),n("li",[n("code",[e._v("LETSENCRYPT_EMAIL=admin@gruppe-adler.com")])])])])]),e._v(" "),n("p",[n("img",{attrs:{src:t(245),alt:"container-structure"}})]),e._v(" "),n("h2",{attrs:{id:"docker-networks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-networks"}},[e._v("#")]),e._v(" Docker Networks")]),e._v(" "),n("p",[n("em",[e._v("soonTM")])]),e._v(" "),n("h2",{attrs:{id:"docker-compose-files"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-files"}},[e._v("#")]),e._v(" Docker Compose Files")]),e._v(" "),n("p",[e._v("Alle Docker Compose Konfigurationsdateien lassen sich unter "),n("code",[e._v("/etc/docker-configs/")]),e._v(" finden. Der gundlegende Aufbau ist wie folgt:")]),e._v(" "),n("pre",{staticClass:"vue-container"},[n("code",[n("p",[n("code",[e._v("/etc/docker-configs")]),e._v("\nâ”œâ”€â”€ "),n("code",[e._v("homepage")]),e._v(" "),n("em",[e._v("Hier befindet sich alles zur Homepage")]),e._v("\nâ”‚\nâ”œâ”€â”€ "),n("code",[e._v("blechadler")]),e._v(" "),n("em",[e._v("Hier befinden sich alles zum Blechadler")]),e._v("\nâ”‚     â”œâ”€â”€ docker-compose.yml "),n("em",[e._v("Docker Compose Konfiguration fÃ¼r Blechadler")]),e._v("\nâ”‚     â””â”€â”€ volumes "),n("em",[e._v("EnthÃ¤lt soft links zu allen docker volumes fÃ¼r Blechadler")]),e._v("\nâ”‚           â”œâ”€â”€ "),n("em",[e._v("[...]")]),e._v("\nâ”‚           â””â”€â”€ config "),n("em",[e._v("Link zu "),n("strong",[e._v("config")]),e._v(" volume")]),e._v("\nâ”‚\nâ””â”€â”€ "),n("em",[e._v("[...]")])]),e._v("\n")])]),n("h2",{attrs:{id:"cheat-sheet"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cheat-sheet"}},[e._v("#")]),e._v(" Cheat Sheet")]),e._v(" "),n("h3",{attrs:{id:"vm-neuststarten"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vm-neuststarten"}},[e._v("#")]),e._v(" VM neuststarten")]),e._v(" "),n("p",[n("code",[e._v("reboot")])]),e._v(" "),n("h3",{attrs:{id:"alle-container-auflisten"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#alle-container-auflisten"}},[e._v("#")]),e._v(" Alle Container auflisten")]),e._v(" "),n("p",[n("code",[e._v("docker ps -a")]),n("br"),e._v(" "),n("img",{attrs:{src:t(246),alt:"list-containers"}})]),e._v(" "),n("h3",{attrs:{id:"eine-applikation-starten"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#eine-applikation-starten"}},[e._v("#")]),e._v(" Eine Applikation starten")]),e._v(" "),n("ol",[n("li",[e._v("In jeweilges Verzeichnis wechseln\n"),n("code",[e._v("cd /etc/docker-configs/foo")])]),e._v(" "),n("li",[e._v("Applikation starten\n"),n("code",[e._v("docker-compose up -d")])])])])}),[],!1,null,null,null);r.default=a.exports}}]);